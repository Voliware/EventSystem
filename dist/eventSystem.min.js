class EventSystem{constructor(){return this.events={},this}generateRandomString(e){for(var t,n="";n.length<e;)n+=(void 0,(t=Math.floor(62*Math.random()))<10?t:t<36?String.fromCharCode(t+55):String.fromCharCode(t+61));return n}getHandlersCount(e){let t=this.events[e];if(!t)return 0;let n=0,r=[];for(r.push(t);r.length>0;){let e=r.pop();for(let t in e)"_handlers"===t?n+=e[t].length:"object"==typeof e[t]&&r.push(e[t])}return n}on(e,t){let n=e.split("."),r=this.events;for(let e=0;e<n.length;e++){let l=n[e];r[l]||(r[l]={}),e===n.length-1?(Array.isArray(r[l]._handlers)||(r[l]._handlers=[]),r[l]._handlers.push(t)):r=r[l]}return this}one(e,t){let n=this,r=e+"."+this.generateRandomString(16);return this.on(r,function(e){t(e),n.off(r)}),this}off(e,t=!0){let n=e.split("."),r=this.events;for(let e=0;e<n.length;e++){let l=n[e];e===n.length-1?t?delete r[l]:(delete r[l]._handlers,0===Object.keys(r[l]).length&&delete r[l]):r=r[l]}return this}emit(e,t){let n=e.split("."),r=this.events;for(let e=0;e<n.length;e++){if(!(r=r[n[e]]))return this;if(e===n.length-1){let e=[];for(e.push(r);e.length;){let n=e.pop();for(let r in n)if("_handlers"===r)for(let e=0;e<n[r].length;e++)n[r][e](t);else e.push(n[r])}}}return this}}"undefined"!=typeof module&&(module.exports=EventSystem);